---
title: "Worksheet 2"
output: html_document
---

```{r setup, include=FALSE}
# packages used by the exercises
library(ggplot2)
library(tidyverse)
library(socviz)
knitr::opts_chunk$set(echo = TRUE, message = T, warning = T)
```





We will use the `gss_sm` dataset from the `socviz` library.

```{r}
glimpse(gss_sm)
```



1. Create a dataframe called `df` from the `gss_sm` dataset, deleting the variables from `to_delete`, and draw 500 random samples. 
```{r}
set.seed(2025)
to_delete <- c("id", "grass", "wtssall", "partners_rc", "income_rc")

rm(to_delete)
```






2. How many unique values are there in `income16`? The command `as.numeric(stringr::str_extract(income16, "\\d+"))` will convert them to the lowest numeric values. Do so. 



3. Find out how many unique political views there are, and create a new numerical variable called `polviews_num`. How would you design this numerical variable? Do the same for education and happiness and call them `degree_num` and `happy_num`.  



4. Create a scatterplot with a linear smoothing model with numerical income vs numerical degree. Distinguish the color by the numerical political views and shape by religious preference. 


5. In a single sequence, create a bar chart of average happiness for each religion, separated by big regions. 


6. Create a boxplot visualizing the age distribution for each political view, distinguish gender by sex, faceted by race. Use the `scale_` function to change the color to `c("41B073", "5B2D9C")`.

7. Select all the genuine numerical variables (after conversions in the previous steps) and create a correlogram. What are the top 3 pairs of most correlated variables?






